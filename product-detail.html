<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dual Search System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        searchBlue: '#3B82F6'
                    }
                }
            }
        }
    </script>
    <style>
        .search-typing {
            border-color: #FCD34D !important;
            box-shadow: 0 0 0 2px rgba(252, 211, 77, 0.2) !important;
        }
        
        .search-results-container {
            scroll-margin-top: 20px;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-search {
            animation: pulseSearch 0.5s ease-in-out;
        }
        
        @keyframes pulseSearch {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header with Search Bars -->
    <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-gray-800">ShopSmart</h1>
                </div>
                
                <!-- Desktop Search Bar -->
                <div class="hidden md:flex w-full max-w-lg mx-8">
                    <div class="search-bar flex rounded-lg overflow-hidden shadow-md border border-gray-300 bg-white w-full">
                        <input type="text" id="desktopSearchInput" placeholder="Search products..." 
                               class="flex-1 px-4 py-3 text-base border-0 focus:outline-none placeholder-gray-500 text-black transition-all duration-200" />
                        <button id="desktopSearchBtn" class="text-white px-5 py-3 text-base font-semibold bg-searchBlue hover:bg-blue-700 transition-colors duration-200">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Menu Icon for Mobile -->
                <div class="md:hidden">
                    <button class="text-gray-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Search Bar -->
            <div class="flex md:hidden w-full max-w-xs mx-auto mt-4">
                <div class="search-bar flex rounded-lg overflow-hidden shadow-md border border-gray-300 bg-white w-full">
                    <input type="text" id="mobileSearchInput" placeholder="Search..." 
                           class="flex-1 px-3 py-2 text-sm border-0 focus:outline-none placeholder-gray-500 text-black transition-all duration-200" />
                    <button id="mobileSearchBtn" class="text-white px-4 py-2 text-sm font-semibold bg-searchBlue hover:bg-blue-700 transition-colors duration-200">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Search Status -->
        <div id="searchStatus" class="hidden mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <div class="flex items-center">
                <i class="fas fa-search text-blue-600 mr-2"></i>
                <span id="searchStatusText" class="text-blue-800"></span>
            </div>
        </div>
        
        <!-- Categories Section -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Categories</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <div class="category-card bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition-shadow duration-200">
                    <i class="fas fa-laptop text-4xl text-blue-600 mb-4"></i>
                    <h3 class="text-lg font-semibold text-gray-800">Electronics</h3>
                </div>
                <div class="category-card bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition-shadow duration-200">
                    <i class="fas fa-tshirt text-4xl text-green-600 mb-4"></i>
                    <h3 class="text-lg font-semibold text-gray-800">Clothing</h3>
                </div>
                <div class="category-card bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition-shadow duration-200">
                    <i class="fas fa-home text-4xl text-purple-600 mb-4"></i>
                    <h3 class="text-lg font-semibold text-gray-800">Home & Garden</h3>
                </div>
                <div class="category-card bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition-shadow duration-200">
                    <i class="fas fa-dumbbell text-4xl text-red-600 mb-4"></i>
                    <h3 class="text-lg font-semibold text-gray-800">Sports</h3>
                </div>
            </div>
        </section>
        
        <!-- Products Section -->
        <section id="productsSection" class="search-results-container">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-gray-800">Products</h2>
                <div id="resultsCount" class="text-gray-600 text-sm"></div>
            </div>
            
            <!-- Products Container -->
            <div id="productsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Products will be rendered here -->
            </div>
        </section>
    </main>

    <script>
        // Sample product data
        const allProducts = [
            { id: 1, name: "iPhone 15 Pro", brand: "Apple", price: 999, category: "Electronics", image: "https://via.placeholder.com/300x200?text=iPhone+15+Pro" },
            { id: 2, name: "Samsung Galaxy S24", brand: "Samsung", price: 899, category: "Electronics", image: "https://via.placeholder.com/300x200?text=Galaxy+S24" },
            { id: 3, name: "MacBook Air", brand: "Apple", price: 1199, category: "Electronics", image: "https://via.placeholder.com/300x200?text=MacBook+Air" },
            { id: 4, name: "Nike Air Max", brand: "Nike", price: 150, category: "Sports", image: "https://via.placeholder.com/300x200?text=Nike+Air+Max" },
            { id: 5, name: "Adidas Ultraboost", brand: "Adidas", price: 180, category: "Sports", image: "https://via.placeholder.com/300x200?text=Adidas+Ultraboost" },
            { id: 6, name: "Levi's Jeans", brand: "Levi's", price: 80, category: "Clothing", image: "https://via.placeholder.com/300x200?text=Levi's+Jeans" },
            { id: 7, name: "H&M T-Shirt", brand: "H&M", price: 25, category: "Clothing", image: "https://via.placeholder.com/300x200?text=H%26M+T-Shirt" },
            { id: 8, name: "IKEA Desk Chair", brand: "IKEA", price: 120, category: "Home & Garden", image: "https://via.placeholder.com/300x200?text=IKEA+Chair" },
            { id: 9, name: "Sony Headphones", brand: "Sony", price: 299, category: "Electronics", image: "https://via.placeholder.com/300x200?text=Sony+Headphones" },
            { id: 10, name: "Under Armour Hoodie", brand: "Under Armour", price: 65, category: "Clothing", image: "https://via.placeholder.com/300x200?text=UA+Hoodie" }
        ];
        
        let filteredProducts = [...allProducts];
        let isTyping = false;
        let typingTimer;
        
        // Normalize helper for plural/singular matching
        function normalize(str) {
            return str.toLowerCase().trim().replace(/s$/, "");
        }
        
        // Render products function
        function renderProducts(products) {
            const container = document.getElementById("productsContainer");
            const resultsCount = document.getElementById("resultsCount");
            
            if (products.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-10 px-4 bg-gray-100 rounded-lg fade-in">
                        <i class="fas fa-search text-4xl text-gray-400 mb-4"></i>
                        <h3 class="text-xl font-bold text-gray-700 mb-2">No products found</h3>
                        <p class="text-gray-600 italic">
                            "When you feel like quitting, remember why you started – 
                            keep searching, the right product is waiting for you!"
                        </p>
                    </div>
                `;
                resultsCount.textContent = "";
                return;
            }
            
            resultsCount.textContent = `${products.length} product${products.length !== 1 ? 's' : ''} found`;
            
            container.innerHTML = products.map(product => `
                <div class="product-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200 fade-in">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">${product.name}</h3>
                        <p class="text-sm text-gray-600 mb-2">${product.brand}</p>
                        <p class="text-sm text-gray-500 mb-3">${product.category}</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-blue-600">$${product.price}</span>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // Handle search logic
        function searchProducts(inputElement, immediate = false) {
            const query = normalize(inputElement.value);
            const productsContainer = document.getElementById("productsContainer");
            const searchStatus = document.getElementById("searchStatus");
            const searchStatusText = document.getElementById("searchStatusText");
            
            // If immediate search (button click), clear typing timer
            if (immediate) {
                clearTimeout(typingTimer);
                isTyping = false;
                inputElement.classList.remove('search-typing');
            }
            
            // Reset container
            productsContainer.innerHTML = "";
            
            if (!query) {
                // If search empty → show all
                filteredProducts = allProducts;
                renderProducts(filteredProducts);
                searchStatus.classList.add('hidden');
                return;
            }
            
            // Show search status
            searchStatus.classList.remove('hidden');
            searchStatusText.textContent = `Searching for "${inputElement.value}"...`;
            
            // Filter by name or brand
            filteredProducts = allProducts.filter((p) => {
                const name = normalize(p.name || "");
                const brand = normalize(p.brand || "");
                const category = normalize(p.category || "");
                return name.includes(query) || brand.includes(query) || category.includes(query);
            });
            
            // Update search status
            if (filteredProducts.length > 0) {
                searchStatusText.textContent = `Found ${filteredProducts.length} result${filteredProducts.length !== 1 ? 's' : ''} for "${inputElement.value}"`;
            } else {
                searchStatusText.textContent = `No results found for "${inputElement.value}"`;
            }
            
            renderProducts(filteredProducts);
            
            // Scroll to results if search was triggered by button click
            if (immediate) {
                setTimeout(() => {
                    document.getElementById('productsSection').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 100);
            }
        }
        
        // Sync search inputs
        function syncSearchInputs(activeInput, targetInput) {
            targetInput.value = activeInput.value;
        }
        
        // Setup search functionality
        function setupSearch() {
            const desktopInput = document.getElementById('desktopSearchInput');
            const mobileInput = document.getElementById('mobileSearchInput');
            const desktopBtn = document.getElementById('desktopSearchBtn');
            const mobileBtn = document.getElementById('mobileSearchBtn');
            
            // Desktop input events
            desktopInput.addEventListener('keyup', (e) => {
                syncSearchInputs(desktopInput, mobileInput);
                
                // Add typing indicator
                desktopInput.classList.add('search-typing');
                clearTimeout(typingTimer);
                isTyping = true;
                
                // Remove typing indicator after 1 second of no typing
                typingTimer = setTimeout(() => {
                    desktopInput.classList.remove('search-typing');
                    isTyping = false;
                }, 1000);
                
                // Search on Enter key
                if (e.key === 'Enter') {
                    searchProducts(desktopInput, true);
                }
            });
            
            // Mobile input events  
            mobileInput.addEventListener('keyup', (e) => {
                syncSearchInputs(mobileInput, desktopInput);
                
                // Add typing indicator
                mobileInput.classList.add('search-typing');
                clearTimeout(typingTimer);
                isTyping = true;
                
                // Remove typing indicator after 1 second of no typing
                typingTimer = setTimeout(() => {
                    mobileInput.classList.remove('search-typing');
                    isTyping = false;
                }, 1000);
                
                // Search on Enter key
                if (e.key === 'Enter') {
                    searchProducts(mobileInput, true);
                }
            });
            
            // Button click events
            desktopBtn.addEventListener('click', () => {
                desktopBtn.classList.add('pulse-search');
                searchProducts(desktopInput, true);
                setTimeout(() => {
                    desktopBtn.classList.remove('pulse-search');
                }, 500);
            });
            
            mobileBtn.addEventListener('click', () => {
                mobileBtn.classList.add('pulse-search');
                searchProducts(mobileInput, true);
                setTimeout(() => {
                    mobileBtn.classList.remove('pulse-search');
                }, 500);
            });
        }
        
        // Initialize the application
        function init() {
            // Render initial products
            renderProducts(filteredProducts);
            
            // Setup search functionality
            setupSearch();
            
            console.log('Dual search system initialized successfully!');
        }
        
        // Start the application when DOM is ready
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>